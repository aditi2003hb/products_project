{% extends "base.html" %}
{% block content %}
<div class="flex justify-between items-center mb-6">
  <h2 class="text-2xl font-semibold">Admin Dashboard</h2>
  <p class="text-sm text-gray-600">Logged in as <code>{{ current_uuid }}</code></p>
</div>

<div class="mb-6 space-x-4">
  <a href="/register"
     class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
    Add User
  </a>
  <a href="/transactions/add?current_uuid={{ current_uuid }}"
     class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
    Add Transaction
  </a>
</div>

<div class="overflow-x-auto bg-white rounded-lg shadow-lg">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Location</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Created</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">UUID</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      {% for u in users %}
      <tr>
        <td class="px-6 py-4 whitespace-nowrap">{{ u.name }}</td>
        <td class="px-6 py-4 whitespace-nowrap">{{ u.type }}</td>
        <td class="px-6 py-4 whitespace-nowrap">{{ u.location }}</td>
        <td class="px-6 py-4 whitespace-nowrap">
          <span class="inline-block px-2 py-1 text-xs rounded 
            {{ 'bg-green-100 text-green-800' if u.status else 'bg-red-100 text-red-800' }}">
            {{ "Active" if u.status else "Inactive" }}
          </span>
        </td>
        <td class="px-6 py-4 whitespace-nowrap">{{ u.created_date }}</td>
        <td class="px-6 py-4 whitespace-nowrap font-mono text-sm">{{ u.uu_id }}</td>
        <td class="px-6 py-4 whitespace-nowrap space-x-2">
          <a href="/users/update/{{ u.uu_id }}?current_uuid={{ current_uuid }}"
             class="text-indigo-600 hover:text-indigo-900">Edit</a>
          <a href="/users/toggle/{{ u.uu_id }}?current_uuid={{ current_uuid }}"
             class="hover:underline
                {{ 'text-red-600' if u.status else 'text-green-600' }}">
            {{ "Disable" if u.status else "Enable" }}
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
